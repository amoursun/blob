(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{543:function(s,t,a){"use strict";a.r(t);var n=a(30),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"javascript"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#javascript"}},[s._v("#")]),s._v(" Javascript")]),s._v(" "),a("p",[s._v("!!!include(docs/blog/javascript/querySelectorAll与getElementsBy区别.md)!!!")]),s._v(" "),a("p",[s._v("!!!include(docs/blog/javascript/NodeList和HTMLCollection之间的关系.md)!!!")]),s._v(" "),a("p",[s._v("!!!include(docs/blog/javascript/map(parseInt)坑.md)!!!")]),s._v(" "),a("p",[s._v("!!!include(docs/blog/javascript/默认参数引发的bug.md)!!!")]),s._v(" "),a("p",[s._v("!!!include(docs/blog/javascript/多余逗号引发的错误.md)!!!")]),s._v(" "),a("p",[s._v("!!!include(docs/blog/javascript/js中的逗号.md)!!!")]),s._v(" "),a("p",[s._v("!!!include(docs/blog/javascript/document.documentElement与document.body.md)!!!")]),s._v(" "),a("p",[s._v("!!!include(docs/blog/javascript/sort.md)!!!")]),s._v(" "),a("p",[s._v("!!!include(docs/blog/javascript/codePointAt和charCodeAt.md)!!!")]),s._v(" "),a("p",[s._v("!!!include(docs/blog/javascript/switch.md)!!!")]),s._v(" "),a("p",[s._v("!!!include(docs/blog/javascript/div-keydown.md)!!!")]),s._v(" "),a("p",[s._v("!!!include(docs/blog/javascript/console的坑.md)!!!")]),s._v(" "),a("p",[s._v("!!!include(docs/blog/javascript/finally坑.md)!!!")]),s._v(" "),a("p",[s._v("!!!include(docs/blog/javascript/atob解码中文字符.md)!!!")]),s._v(" "),a("p",[s._v("!!!include(docs/blog/javascript/Safari下Date的坑.md)!!!")]),s._v(" "),a("p",[s._v("!!!include(docs/blog/javascript/e.target与e.currentTarget的区别.md)!!!")]),s._v(" "),a("p",[s._v("!!!include(docs/blog/javascript/函数变量必填校验.md)!!!")]),s._v(" "),a("p",[s._v("!!!include(docs/blog/javascript/错误处理.md)!!!")]),s._v(" "),a("p",[s._v("!!!include(docs/blog/javascript/insertBefore坑.md)!!!")]),s._v(" "),a("p",[s._v("!!!include(docs/blog/javascript/为什么前端监控要用GIF打点.md)!!!")]),s._v(" "),a("p",[s._v("!!!include(docs/blog/javascript/Object.create.md)!!!")]),s._v(" "),a("p",[s._v("!!!include(docs/blog/javascript/promise-in-forEach.md)!!!")]),s._v(" "),a("p",[s._v("!!!include(docs/blog/javascript/函数参数传递.md)!!!")]),s._v(" "),a("h2",{attrs:{id:"new-date-在-safari-的坑"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#new-date-在-safari-的坑"}},[s._v("#")]),s._v(" new Date 在 safari 的坑")]),s._v(" "),a("p",[a("code",[s._v("new Date('2019-06-04 00:00:00')")]),s._v("在除了 Safari 的浏览器都能正常运行。\n问题就出在 Safari 对于这个格式 "),a("code",[s._v("YYYY-MM-DD HH:MM:SS")]),s._v(" 无法解析，所以我们需要做的是将其转化为 "),a("code",[s._v("YYYY/MM/DD HH:MM:SS")])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Date")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("val"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("replace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token regex"}},[a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token regex-flags"}},[s._v("g")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"获取元素宽度"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#获取元素宽度"}},[s._v("#")]),s._v(" 获取元素宽度")]),s._v(" "),a("p",[s._v("说真的，我觉得前端麻烦的地方就是 API 太多了，我只是想获取一个元素的宽度居然有"),a("code",[s._v("getBoundingClientRect().width")])]),s._v(" "),a("h2",{attrs:{id:"我使用-async-await-而不使用-promises-的六个理由"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#我使用-async-await-而不使用-promises-的六个理由"}},[s._v("#")]),s._v(" 我使用 Async/Await 而不使用 Promises 的六个理由")]),s._v(" "),a("p",[s._v("本文主要来自于 "),a("a",{attrs:{href:"https://hackernoon.com/6-reasons-why-javascripts-async-await-blows-promises-away-tutorial-c7ec10518dd9",target:"_blank",rel:"noopener noreferrer"}},[s._v("6 Reasons Why JavaScript’s Async/Await Blows Promises Away"),a("OutboundLink")],1),s._v("，在 medium 上，需要翻墙阅读。")]),s._v(" "),a("p",[s._v("之前我很长一段时间内都是使用 promise 的，但遇到一些复杂业务的时候，发现还是写起来会很不爽，代码阅读性也有所欠缺。")]),s._v(" "),a("ol",[a("li",[s._v("简洁")])]),s._v(" "),a("p",[s._v("对比 Promise，我们不需要书写.then，不需要新建一个匿名函数处理响应，也不需要再把数据赋值给一个我们其实并不需要的变量")]),s._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[s._v("a")])]),s._v(" "),a("p",[s._v("但 Async/Await 也不是没有缺点的，很多人经常会错用它。比如我一个组件创建的的时候会异步向服务器发送三个请求，"),a("code",[s._v("a")]),s._v("、"),a("code",[s._v("b``、c")]),s._v("。\n很多人会这么写")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" resultA "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("fetch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'A'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" resultB "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("fetch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'B'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" resultC "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("fetch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'C'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("resultA"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" resultB"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" resultC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("虽然上面的这段写法相对于 promise 简洁了不少，但效率来说是不合格的。因为这个请求是异步的，毫无联系的，所有没必要顺序请求，他们三个明显可以异步并发的去请求。要想实现真正的异步，还是需要依赖 Promise.all 封装一层：")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" result "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" Promise"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("all")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("fetch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'a.json'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("fetch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'b.json'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("fetch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'c.json'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),s._v("result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[s._v("未完待续...")])])}),[],!1,null,null,null);t.default=e.exports}}]);