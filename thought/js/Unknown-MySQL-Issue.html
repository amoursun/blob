<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>è®°ä¸€æ¬¡å¥‡æ€ªçš„ MySQL é”™è¯¯è§£å†³ | Amoursun&#39;s Blog</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/blob/img/logo.ico">
    <meta name="description" content="ä½œä¸ºæŠ€æœ¯åšå®¢, æ–‡æ¡£, æŠ€æœ¯æ•´ç†">
    
    <link rel="preload" href="/blob/assets/css/0.styles.512f6b3e.css" as="style"><link rel="preload" href="/blob/assets/js/app.ecadfaec.js" as="script"><link rel="preload" href="/blob/assets/js/2.4dd746ab.js" as="script"><link rel="preload" href="/blob/assets/js/111.6c168fad.js" as="script"><link rel="preload" href="/blob/assets/js/3.064d374d.js" as="script"><link rel="prefetch" href="/blob/assets/js/10.15f30298.js"><link rel="prefetch" href="/blob/assets/js/100.7bcf5ed9.js"><link rel="prefetch" href="/blob/assets/js/101.6e470a6a.js"><link rel="prefetch" href="/blob/assets/js/102.ba300cc1.js"><link rel="prefetch" href="/blob/assets/js/103.c4d31c7a.js"><link rel="prefetch" href="/blob/assets/js/104.b063024a.js"><link rel="prefetch" href="/blob/assets/js/105.00974b2c.js"><link rel="prefetch" href="/blob/assets/js/106.b4e251ce.js"><link rel="prefetch" href="/blob/assets/js/107.44f99e93.js"><link rel="prefetch" href="/blob/assets/js/108.71f0f7fe.js"><link rel="prefetch" href="/blob/assets/js/109.119d7418.js"><link rel="prefetch" href="/blob/assets/js/11.09c91d14.js"><link rel="prefetch" href="/blob/assets/js/110.c78659f9.js"><link rel="prefetch" href="/blob/assets/js/112.f7f01a0a.js"><link rel="prefetch" href="/blob/assets/js/113.6d897872.js"><link rel="prefetch" href="/blob/assets/js/114.c3d39149.js"><link rel="prefetch" href="/blob/assets/js/115.168cc5b3.js"><link rel="prefetch" href="/blob/assets/js/12.06387a1e.js"><link rel="prefetch" href="/blob/assets/js/13.56196638.js"><link rel="prefetch" href="/blob/assets/js/14.151af1da.js"><link rel="prefetch" href="/blob/assets/js/15.039f1497.js"><link rel="prefetch" href="/blob/assets/js/16.f3aa56bb.js"><link rel="prefetch" href="/blob/assets/js/17.8a2cdc27.js"><link rel="prefetch" href="/blob/assets/js/18.7d8d68cd.js"><link rel="prefetch" href="/blob/assets/js/19.0f352092.js"><link rel="prefetch" href="/blob/assets/js/20.1206ec44.js"><link rel="prefetch" href="/blob/assets/js/21.183e7040.js"><link rel="prefetch" href="/blob/assets/js/22.b1c951b6.js"><link rel="prefetch" href="/blob/assets/js/23.90b44692.js"><link rel="prefetch" href="/blob/assets/js/24.fa8279ac.js"><link rel="prefetch" href="/blob/assets/js/25.bcc2f0df.js"><link rel="prefetch" href="/blob/assets/js/26.1e349fc6.js"><link rel="prefetch" href="/blob/assets/js/27.7a19d375.js"><link rel="prefetch" href="/blob/assets/js/28.ec480fba.js"><link rel="prefetch" href="/blob/assets/js/29.d30f21b8.js"><link rel="prefetch" href="/blob/assets/js/30.b54def89.js"><link rel="prefetch" href="/blob/assets/js/31.70dc9ee0.js"><link rel="prefetch" href="/blob/assets/js/32.c620e4a6.js"><link rel="prefetch" href="/blob/assets/js/33.fab3428e.js"><link rel="prefetch" href="/blob/assets/js/34.249e7e01.js"><link rel="prefetch" href="/blob/assets/js/35.88b34055.js"><link rel="prefetch" href="/blob/assets/js/36.8934db05.js"><link rel="prefetch" href="/blob/assets/js/37.92d7d1bb.js"><link rel="prefetch" href="/blob/assets/js/38.d951c764.js"><link rel="prefetch" href="/blob/assets/js/39.64789f78.js"><link rel="prefetch" href="/blob/assets/js/4.d26ff908.js"><link rel="prefetch" href="/blob/assets/js/40.ff938159.js"><link rel="prefetch" href="/blob/assets/js/41.6fd2e7b0.js"><link rel="prefetch" href="/blob/assets/js/42.2cf9f0b3.js"><link rel="prefetch" href="/blob/assets/js/43.6a4ff0b7.js"><link rel="prefetch" href="/blob/assets/js/44.bde21950.js"><link rel="prefetch" href="/blob/assets/js/45.e5f9d82b.js"><link rel="prefetch" href="/blob/assets/js/46.f62402ea.js"><link rel="prefetch" href="/blob/assets/js/47.75411b10.js"><link rel="prefetch" href="/blob/assets/js/48.94471d87.js"><link rel="prefetch" href="/blob/assets/js/49.70354c10.js"><link rel="prefetch" href="/blob/assets/js/5.90006399.js"><link rel="prefetch" href="/blob/assets/js/50.513f77ef.js"><link rel="prefetch" href="/blob/assets/js/51.ad37ef6e.js"><link rel="prefetch" href="/blob/assets/js/52.b09abfb7.js"><link rel="prefetch" href="/blob/assets/js/53.6e02e8f5.js"><link rel="prefetch" href="/blob/assets/js/54.18b67f3b.js"><link rel="prefetch" href="/blob/assets/js/55.2a89c371.js"><link rel="prefetch" href="/blob/assets/js/56.646aa224.js"><link rel="prefetch" href="/blob/assets/js/57.86ea89d3.js"><link rel="prefetch" href="/blob/assets/js/58.d39a0b97.js"><link rel="prefetch" href="/blob/assets/js/59.2bab5a82.js"><link rel="prefetch" href="/blob/assets/js/6.6dd0c1b6.js"><link rel="prefetch" href="/blob/assets/js/60.e120fe20.js"><link rel="prefetch" href="/blob/assets/js/61.157070a6.js"><link rel="prefetch" href="/blob/assets/js/62.5d50208c.js"><link rel="prefetch" href="/blob/assets/js/63.78a711c4.js"><link rel="prefetch" href="/blob/assets/js/64.cc383dd9.js"><link rel="prefetch" href="/blob/assets/js/65.0d8442fa.js"><link rel="prefetch" href="/blob/assets/js/66.e41ee573.js"><link rel="prefetch" href="/blob/assets/js/67.b403075b.js"><link rel="prefetch" href="/blob/assets/js/68.4fe2fd03.js"><link rel="prefetch" href="/blob/assets/js/69.6819bb80.js"><link rel="prefetch" href="/blob/assets/js/7.0b3bf944.js"><link rel="prefetch" href="/blob/assets/js/70.d200be71.js"><link rel="prefetch" href="/blob/assets/js/71.d179e40b.js"><link rel="prefetch" href="/blob/assets/js/72.8f8d5990.js"><link rel="prefetch" href="/blob/assets/js/73.f9ef32f6.js"><link rel="prefetch" href="/blob/assets/js/74.5ada2612.js"><link rel="prefetch" href="/blob/assets/js/75.3a683087.js"><link rel="prefetch" href="/blob/assets/js/76.140a7efc.js"><link rel="prefetch" href="/blob/assets/js/77.4c73efd4.js"><link rel="prefetch" href="/blob/assets/js/78.0835fec4.js"><link rel="prefetch" href="/blob/assets/js/79.04208832.js"><link rel="prefetch" href="/blob/assets/js/8.f627abd4.js"><link rel="prefetch" href="/blob/assets/js/80.5785e6d3.js"><link rel="prefetch" href="/blob/assets/js/81.1efa34d4.js"><link rel="prefetch" href="/blob/assets/js/82.d8f9974a.js"><link rel="prefetch" href="/blob/assets/js/83.0cd7fcc8.js"><link rel="prefetch" href="/blob/assets/js/84.23ae2a18.js"><link rel="prefetch" href="/blob/assets/js/85.c960f04b.js"><link rel="prefetch" href="/blob/assets/js/86.caaec67b.js"><link rel="prefetch" href="/blob/assets/js/87.c1e2165f.js"><link rel="prefetch" href="/blob/assets/js/88.376d4561.js"><link rel="prefetch" href="/blob/assets/js/89.45bb7dea.js"><link rel="prefetch" href="/blob/assets/js/9.44839921.js"><link rel="prefetch" href="/blob/assets/js/90.e070d59e.js"><link rel="prefetch" href="/blob/assets/js/91.04e56fb6.js"><link rel="prefetch" href="/blob/assets/js/92.254f656d.js"><link rel="prefetch" href="/blob/assets/js/93.4b4108e5.js"><link rel="prefetch" href="/blob/assets/js/94.60d7ca38.js"><link rel="prefetch" href="/blob/assets/js/95.5d6bfd3d.js"><link rel="prefetch" href="/blob/assets/js/96.fa4d6ed3.js"><link rel="prefetch" href="/blob/assets/js/97.0678b08c.js"><link rel="prefetch" href="/blob/assets/js/98.6543b8fd.js"><link rel="prefetch" href="/blob/assets/js/99.33e0385c.js">
    <link rel="stylesheet" href="/blob/assets/css/0.styles.512f6b3e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blob/" class="home-link router-link-active"><!----> <span class="site-name">Amoursun's Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blob/" class="nav-link">
  é¦–é¡µ
</a></div><div class="nav-item"><a href="/blob/links/stack.html" class="nav-link">
  é“¾æ¥
</a></div><div class="nav-item"><a href="https://juejin.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  æ˜é‡‘
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/blob/blog/js.html" class="nav-link">
  Blog
</a></div><div class="nav-item"><a href="/blob/guide/video.html" class="nav-link">
  é›†åˆ
</a></div><div class="nav-item"><a href="/blob/interview/" class="nav-link">
  é¢è¯•
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="åˆ†ç±»" class="dropdown-title"><span class="title">åˆ†ç±»</span> <span class="arrow down"></span></button> <button type="button" aria-label="åˆ†ç±»" class="mobile-dropdown-title"><span class="title">åˆ†ç±»</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blob/thought/js/" class="nav-link router-link-active">
  JS
</a></li><li class="dropdown-item"><!----> <a href="/blob/thought/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/blob/thought/node/" class="nav-link">
  Node
</a></li><li class="dropdown-item"><!----> <a href="/blob/thought/es6/" class="nav-link">
  ES6
</a></li><li class="dropdown-item"><!----> <a href="/blob/thought/git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/blob/thought/react&amp;mobx/" class="nav-link">
  React &amp; Mobx
</a></li><li class="dropdown-item"><!----> <a href="/blob/thought/other/" class="nav-link">
  å…¶ä»–
</a></li></ul></div></div> <a href="https://github.com/amoursun/blob.git" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blob/" class="nav-link">
  é¦–é¡µ
</a></div><div class="nav-item"><a href="/blob/links/stack.html" class="nav-link">
  é“¾æ¥
</a></div><div class="nav-item"><a href="https://juejin.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  æ˜é‡‘
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/blob/blog/js.html" class="nav-link">
  Blog
</a></div><div class="nav-item"><a href="/blob/guide/video.html" class="nav-link">
  é›†åˆ
</a></div><div class="nav-item"><a href="/blob/interview/" class="nav-link">
  é¢è¯•
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="åˆ†ç±»" class="dropdown-title"><span class="title">åˆ†ç±»</span> <span class="arrow down"></span></button> <button type="button" aria-label="åˆ†ç±»" class="mobile-dropdown-title"><span class="title">åˆ†ç±»</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blob/thought/js/" class="nav-link router-link-active">
  JS
</a></li><li class="dropdown-item"><!----> <a href="/blob/thought/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/blob/thought/node/" class="nav-link">
  Node
</a></li><li class="dropdown-item"><!----> <a href="/blob/thought/es6/" class="nav-link">
  ES6
</a></li><li class="dropdown-item"><!----> <a href="/blob/thought/git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/blob/thought/react&amp;mobx/" class="nav-link">
  React &amp; Mobx
</a></li><li class="dropdown-item"><!----> <a href="/blob/thought/other/" class="nav-link">
  å…¶ä»–
</a></li></ul></div></div> <a href="https://github.com/amoursun/blob.git" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>åˆ†ç±»</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blob/thought/" aria-current="page" class="sidebar-link">Thought-éšç¬” #</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="è®°ä¸€æ¬¡å¥‡æ€ªçš„-mysql-é”™è¯¯è§£å†³"><a href="#è®°ä¸€æ¬¡å¥‡æ€ªçš„-mysql-é”™è¯¯è§£å†³" class="header-anchor">#</a> è®°ä¸€æ¬¡å¥‡æ€ªçš„ MySQL é”™è¯¯è§£å†³</h1> <p>ä»Šå¤©éƒ¨ç½²ä¸€ä¸ª PHP åç«¯çš„æ—¶å€™ï¼Œå‘ç°åœ¨æœ¬åœ°ï¼ˆWindowsï¼‰æµ‹è¯•å¯ä»¥è¿ä¸Šæ•°æ®åº“ï¼Œè€Œåœ¨ç”Ÿäº§ç¯å¢ƒï¼ˆUbuntu 20.04ï¼‰ä¸Šå´æŠ¥ Permission denied é”™è¯¯ï¼Œå¯†ç éƒ½æ˜¯æ­£ç¡®çš„ï¼Œçœ‹æ¥è¿˜æ˜¯ Ubuntu çš„å®‰å…¨å¼„å¾—å¥½å“ŸğŸ˜…ï¼Œéšä¾¿å» Google äº†ä¸€ä¸‹å‘ç°å¦‚æœè¦ç”¨ root ç™»å½•å¿…é¡»å¾—åŠ ä¸Š <code>sudo</code>ï¼Ÿå¤ªå¥‡å¦™äº†ï¼Œäºæ˜¯ä¸€ç§’æƒ³åˆ°å»åˆ›å»ºä¸€ä¸ªæ–°çš„ç”¨æˆ·ã€‚</p> <p><em>é”™è¯¯å¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼Œä¸€ä¸ªå¾ˆå¹³å‡¡çš„ Access deniedã€‚</em></p> <div class="language-log line-numbers-mode"><pre class="language-log"><code><span class="token operator">(</span>HY000<span class="token operator">/</span><span class="token number">1698</span><span class="token operator">)</span><span class="token operator">:</span> Access denied for user <span class="token string">'root'</span><span class="token operator">@</span><span class="token string">'localhost'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>ç„¶åæˆ‘å°±å»åˆ›å»ºæ–°çš„ç”¨æˆ·äº†ï¼Œå…·ä½“æµç¨‹è€ç”Ÿå¸¸è°ˆäº†</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token string">'rootp'</span><span class="token variable">@'localhost'</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'...'</span><span class="token punctuation">;</span> <span class="token comment">-- ä¸æ˜¯ root å°±å¯ä»¥ï¼Œå˜»å˜»</span>
<span class="token keyword">GRANT</span> <span class="token keyword">ALL</span> <span class="token keyword">PRIVILEGES</span> <span class="token keyword">ON</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">'rootp'</span><span class="token variable">@'localhost'</span><span class="token punctuation">;</span>
FLUSH <span class="token keyword">PRIVILEGES</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>ç„¶åå°±ç¦»å¼€äº†æ•°æ®åº“ã€‚å°±åœ¨è¿™ä¸ªæ—¶å€™æˆ‘çªç„¶ä¸çŸ¥é“æ€ä¹ˆæƒ³çš„æƒ³è¦é‡å¯ä¸€ä¸‹æ•°æ®åº“ï¼Œè™½ç„¶è¿™ç§æƒ…å†µä¸‹ä¸é‡å¯æ˜¯å®Œå…¨å¯ä»¥çš„ã€‚é‡å¯å°±é‡å¯å§ï¼Œåæ­£ä¸æ˜¯ç”šä¹ˆé«˜å±æ“ä½œï¼Œå¯è¿™ä¸€é‡å¯å¯ç»™çˆ·æ•´éº»äº†å•Šï¼Œå‡ºç°äº†æˆ‘ä»æ¥æ²¡æœ‰è§è¿‡çš„é”™è¯¯ï¼Œç”šè‡³è§‰å¾— MariaDB åœ¨é€—æˆ‘ã€‚æŠ¥é”™ä¿¡æ¯å¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼š</p> <div class="language-log line-numbers-mode"><div class="highlight-lines"><br><br><br><br><br><br><br><div class="highlighted">Â </div><div class="highlighted">Â </div><br><br><br><br><br><br><br><div class="highlighted">Â </div><br></div><pre class="language-log"><code><span class="token date number">Aug 06</span> <span class="token time number">01:35:42</span> server systemd<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">:</span> Starting MariaDB <span class="token number">10.1.47</span> database server<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token operator">-</span><span class="token operator">-</span> Subject<span class="token operator">:</span> Unit <span class="token domain constant">mariadb.service</span> has begun start<span class="token operator">-</span>up
<span class="token operator">-</span><span class="token operator">-</span> Defined<span class="token operator">-</span>By<span class="token operator">:</span> systemd
<span class="token operator">-</span><span class="token operator">-</span> Support<span class="token operator">:</span> <span class="token url">http://www.ubuntu.com/support</span>
<span class="token operator">-</span><span class="token operator">-</span>
<span class="token operator">-</span><span class="token operator">-</span> Unit <span class="token domain constant">mariadb.service</span> has begun starting up<span class="token punctuation">.</span>
<span class="token date number">Aug 06</span> <span class="token time number">01:35:43</span> server mysqld<span class="token punctuation">[</span><span class="token number">4431</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token date number">2021-08-06</span>  <span class="token time number">1:35:43</span> <span class="token number">140103940127872</span> <span class="token punctuation">[</span>Note<span class="token punctuation">]</span> <span class="token file-path string">/usr/sbin/mysqld</span> <span class="token operator">(</span>mysqld <span class="token number">10.1.47</span><span class="token operator">-</span>MariaDB<span class="token operator">-</span>0ubuntu0<span class="token punctuation">.</span>18<span class="token punctuation">.</span>04<span class="token punctuation">.</span>1<span class="token operator">)</span> starting as process <span class="token number">4431</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token date number">Aug 06</span> <span class="token time number">01:35:46</span> server systemd<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">:</span> mariadb<span class="token punctuation">.</span>service<span class="token operator">:</span> Main process exited<span class="token punctuation">,</span> code<span class="token operator">=</span>exited<span class="token punctuation">,</span> status<span class="token operator">=</span><span class="token number">7</span><span class="token operator">/</span>NOTRUNNING
<span class="token date number">Aug 06</span> <span class="token time number">01:35:46</span> server systemd<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">:</span> mariadb<span class="token punctuation">.</span>service<span class="token operator">:</span> Failed with result <span class="token string">'exit-code'</span><span class="token punctuation">.</span>
<span class="token date number">Aug 06</span> <span class="token time number">01:35:46</span> server systemd<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">:</span> Failed to start MariaDB <span class="token number">10.1.47</span> database server<span class="token punctuation">.</span>
<span class="token operator">-</span><span class="token operator">-</span> Subject<span class="token operator">:</span> Unit <span class="token domain constant">mariadb.service</span> has failed
<span class="token operator">-</span><span class="token operator">-</span> Defined<span class="token operator">-</span>By<span class="token operator">:</span> systemd
<span class="token operator">-</span><span class="token operator">-</span> Support<span class="token operator">:</span> <span class="token url">http://www.ubuntu.com/support</span>
<span class="token operator">-</span><span class="token operator">-</span>
<span class="token operator">-</span><span class="token operator">-</span> Unit <span class="token domain constant">mariadb.service</span> has failed<span class="token punctuation">.</span>
<span class="token operator">-</span><span class="token operator">-</span>
<span class="token operator">-</span><span class="token operator">-</span> The result is RESULT<span class="token punctuation">.</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>çœ‹çœ‹é«˜äº®çš„è¡Œï¼Œè¯´çš„æ˜¯ SQL è¯å—ï¼Ÿå•¥å«ä½œ <code>Failed with result 'exit-code'</code>ã€<code>The result is RESULT</code>ï¼Ÿç¬‘æ­»ï¼Œå¬å›ä¸€å¸­è¯ï¼Œå¦‚å¬ä¸€å¸­è¯ï¼æ— è®ºæ€ä¹ˆå»æŸ¥ï¼Œå¾—åˆ°çš„ç»“æœéƒ½ä¸æ˜¯å®Œå…¨ç¬¦åˆï¼Œä½†æ˜¯å®ƒä»¬éƒ½æœ‰ä¸€ä¸ªå…±æ€§å°±æ˜¯â€”â€”ä½ è¦é‡è£…ä½ çš„ MySQLã€‚ç¡®å®ï¼Œé‡è£…æ˜¯ä¸€ä¸ªå®Œç¾çš„åŠæ³•ï¼Œæˆ‘ä¹Ÿå¾ˆå–œæ¬¢ï¼Œå¹²è„†åˆ©è½ä¸ç”¨è´¹äº‹è´¹åŠ›æƒ³åŠæ³•ï¼Œå¯æ˜¯â€”â€”æˆ‘çš„æ•°æ®ï¼MySQL æ­»äº†ï¼Œæ‰€ä»¥ <code>mysqldump</code> ä¹Ÿç”¨ä¸äº†...è¿™æ˜¯ä¸ªæ‚–è®ºï¼Œæˆ‘çš„æ•°æ®å¯èƒ½å–ä¸å›æ¥äº†ï¼Œé‚£çœŸæ˜¯å¤Ÿææ€–ã€‚ä½†æ˜¯æˆ‘å¿½ç„¶åˆæƒ³åˆ°ï¼ŒMySQL ä¸€å®šæ˜¯é€šè¿‡æ–‡ä»¶æ¥å­˜å‚¨æ•°æ®çš„ï¼Œäºæ˜¯æˆ‘æœåˆ°äº†ä¸‹é¢è¿™æ®µè¯ã€‚</p> <blockquote><p>What you should do is image your drive, copy it to something else, in preparation for your reinstall. I'd recommend copying everything as authentically as you can, even if that takes a while. That feeling you get when you realize you forgot to salvage something important that is now gone forever is not good.</p> <p>MySQL generally stores data in the data directory. It may take some work to get your MySQL back into the same configuration as before, so be sure to grab the appropriate my.cnf file.</p> <p>It can be really difficult to extract data from a bunch of MySQL data files without the MySQL process actually running. This is why tools like mysqldump exist. If you can get it running, even limping along, that'll be good enough to snapshot it.<br> <br><br><br> <em>æ¥è‡ª <a href="https://stackoverflow.com/questions/20130706/backup-dead-mysql-server" target="_blank" rel="noopener noreferrer">https://stackoverflow.com/questions/20130706/backup-dead-mysql-server<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></em></p></blockquote> <p>è¿™æ®µè¯å‘Šè¯‰æˆ‘ï¼Œå°†æ¥çš„è·¯ä¼šå¾ˆåå·...å•Šè¿™ï¼Œæˆ‘åªæ˜¯æƒ³è¦é‡å¯ä¸ª MySQLï¼Œç”¨å¾—ç€è¿™æ ·å¯¹æˆ‘å—ã€‚æŸæ‰‹æ— ç­–çš„æ—¶å€™ï¼Œæˆ‘çªç„¶æƒ³åˆ°ï¼Œæ—¢ç„¶è¦é‡è£…ï¼Œè¦ä¸æŠŠæ•°æ®éƒ½æ¢ä¸ªä½ç½®è¯•è¯•ï¼Ÿä¹Ÿå°±æ˜¯è¯´æŠŠæ•´ä¸ª MySQL ç”¨æ¥å­˜æ”¾æ•°æ®çš„æ–‡ä»¶å¤¹æ¢åˆ°å¦å¤–ä¸€ä¸ªåœ°æ–¹ï¼Œå—¯ï¼Œæ¢ä¸ªæ–°çš„ç¯å¢ƒï¼Œæ²¡å‡†å°±å¯ä»¥äº†ã€‚å°±æ˜¯è¿™ä¸ªå¥‡å¦™çš„è„‘å›è·¯æ‹¯æ•‘äº†æˆ‘ã€‚</p> <p>é¦–å…ˆï¼Œé‡åˆ°äº†ä¸€ä¸ªå¾ˆå‘çš„åœ°æ–¹ï¼Œé‚£å°±æ˜¯ä¸ç¡®å®šæ•°æ®åœ¨å“ªé‡Œã€‚ç½‘ä¸Šè¯´çš„é»˜è®¤åœ¨ <code>/var/lib/mysql</code>ï¼Œè™½ç„¶æˆ‘ä¹Ÿå‘ç°é‚£é‡Œæœ‰å¾ˆå¤šæ–‡ä»¶ï¼Œä¹Ÿæ˜¯ä¸æ•¢ç¡®å®šã€‚ç„¶ååˆæœ‰çš„è¯´å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ <code>/etc/mysql/mysql.conf.d/mysqld.cnf</code> é‡Œé¢çœ‹ï¼Œç»“æœå¹¶æ²¡æœ‰è¿™ä¸ªæ–‡ä»¶ï¼Œä¹Ÿè®¸æ˜¯å› ä¸ºæˆ‘æ˜¯ MariaDBï¼Œæ‰€ä»¥åº”è¯¥åœ¨ <code>/etc/mysql/my.cnf</code> é‡Œé¢ã€‚ç¡®å®æœ‰è¿™ä¸ªæ–‡ä»¶ï¼Œä½†æ˜¯é‡Œé¢å¹¶æ²¡æœ‰ <code>datadir</code> è¿™ä¸ªå‚æ•°ï¼ŒçœŸæ˜¯é†‰äº†ã€‚åˆ°åæ¥æˆ‘é¼“èµ·å‹‡æ°”æŠŠ <code>datadir</code> è®¾ç½®æˆäº† <code>/mysql-db</code>ï¼Œå¼€å§‹äº†è¿ç§»ä¹‹è·¯ã€‚</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">mkdir</span> /mysql-db
<span class="token function">rsync</span> -av /var/lib/mysql/ /mysql-db
<span class="token function">chmod</span> <span class="token number">755</span> /mysql-db
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>ç›˜ç‚¹ä¸€ä¸‹è¿™é‡Œçš„å‘ï¼Œé¦–å…ˆ <code>rsync</code> çš„ç¬¬äºŒä¸ªå‚æ•° <code>/var/lib/mysql/</code> çš„æœ€åå¸¦ä¸å¸¦ <code>/</code> æ˜¯æœ‰åŒºåˆ«çš„ã€‚å¸¦ä¸Šäº†å°±ä»£è¡¨ <code>/var/lib/mysql/*</code>ï¼Œä¸å¸¦ä¸Šå°±ä»£è¡¨è¿™ä¸ªç›®å½•æœ¬èº«ã€‚åˆšå¼€å§‹æ²¡æœ‰å¸¦ï¼Œå¤åˆ¶äº†ä»¥åä¹Ÿæ²¡æœ‰å» <code>ls /mysql-db</code> å¯¼è‡´å¯åŠ¨çš„æ—¶å€™åˆ·äº†ä¸€å¤§å † not found æŠ¥é”™...ç„¶åå°±æ˜¯æƒé™é—®é¢˜ï¼Œåº”è¯¥æ˜¯ <code>755</code>ã€‚</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>ä¸ºå•¥ä¸ç”¨ <code>mv *</code>ï¼Ÿå› ä¸ºå½“æ—¶æƒ³ä¸åˆ° <code>mv</code>ï¼Œåˆ«éª‚äº†</p></div> <p>ç„¶åè¿˜æœ‰ä¸€ä¸ªç‚¹å°±æ˜¯è¦å» apparmor é‡Œé¢åˆ›å»ºä¸€ä¸ªåˆ«åã€‚</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">vim</span> /etc/apparmor.d/tunables/alias
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>æ·»åŠ  <code>alias /var/lib/mysql -&gt; /mysql-db</code>ï¼Œç„¶å <code>systemctl restart apparmor</code>ã€‚æ¥ä¸‹æ¥å°±å¯ä»¥å‡†å¤‡å¯åŠ¨ MySQL äº†ã€‚</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>systemctl start mysql
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>è®©æˆ‘éœ‡æƒŠçš„æ˜¯è¿™æ¬¡å¯åŠ¨æ²¡æœ‰æŠ¥é”™äº†ã€‚åŸç†è¿˜å¾…è§£é‡Šï¼Œä¸è¿‡æˆ‘ä¸€ç§’å°±å»å…¨é‡å¤‡ä»½äº†ä¸€ä¸‹ï¼Œå› ä¸ºæœ‰äº†å¤‡ä»½å°±å¯ä»¥ç›´æ¥é‡è£…å°±æ²¡æœ‰è¿™ä¹ˆå¤šç ´äº‹äº†ğŸ˜…</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>mysqldump -u root --all-databases <span class="token operator">&gt;</span> /alldb.sql
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>ç„¶åè¿˜å¯ä»¥åœ¨ cron é‡Œé¢åŠ ä¸€ä¸ªå®šæ—¶çš„å¤‡ä»½ï¼Œä¸ºäº†é¿å…è¾“å…¥å¯†ç ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ª <code>~/my.cnf</code> ç„¶åå†™å…¥å†…å®¹</p> <div class="language-conf line-numbers-mode"><pre class="language-text"><code>[mysqldump]
user=root
password=...
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>ç„¶ååœ¨ <code>crontab -e</code> é‡Œé¢åŠ å…¥</p> <div class="language-crontab line-numbers-mode"><pre class="language-text"><code>10 * * * * mysqldump -u root --all-databases &gt; /alldb.sql
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>å°±å¯ä»¥äº†ã€‚</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">æœ€åæ›´æ–°äº(Last Updated):</span> <span class="time">10/6/2021, 9:24:57 AM</span></div></footer> <!----> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/blob/assets/js/app.ecadfaec.js" defer></script><script src="/blob/assets/js/2.4dd746ab.js" defer></script><script src="/blob/assets/js/111.6c168fad.js" defer></script><script src="/blob/assets/js/3.064d374d.js" defer></script>
  </body>
</html>
