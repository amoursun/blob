(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{503:function(s,t,a){"use strict";a.r(t);var e=a(31),r=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"è®°ä¸€æ¬¡å¥‡æ€ªçš„-mysql-é”™è¯¯è§£å†³"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è®°ä¸€æ¬¡å¥‡æ€ªçš„-mysql-é”™è¯¯è§£å†³"}},[s._v("#")]),s._v(" è®°ä¸€æ¬¡å¥‡æ€ªçš„ MySQL é”™è¯¯è§£å†³")]),s._v(" "),a("p",[s._v("ä»Šå¤©éƒ¨ç½²ä¸€ä¸ª PHP åç«¯çš„æ—¶å€™ï¼Œå‘ç°åœ¨æœ¬åœ°ï¼ˆWindowsï¼‰æµ‹è¯•å¯ä»¥è¿ä¸Šæ•°æ®åº“ï¼Œè€Œåœ¨ç”Ÿäº§ç¯å¢ƒï¼ˆUbuntu 20.04ï¼‰ä¸Šå´æŠ¥ Permission denied é”™è¯¯ï¼Œå¯†ç éƒ½æ˜¯æ­£ç¡®çš„ï¼Œçœ‹æ¥è¿˜æ˜¯ Ubuntu çš„å®‰å…¨å¼„å¾—å¥½å“ŸğŸ˜…ï¼Œéšä¾¿å» Google äº†ä¸€ä¸‹å‘ç°å¦‚æœè¦ç”¨ root ç™»å½•å¿…é¡»å¾—åŠ ä¸Š "),a("code",[s._v("sudo")]),s._v("ï¼Ÿå¤ªå¥‡å¦™äº†ï¼Œäºæ˜¯ä¸€ç§’æƒ³åˆ°å»åˆ›å»ºä¸€ä¸ªæ–°çš„ç”¨æˆ·ã€‚")]),s._v(" "),a("p",[a("em",[s._v("é”™è¯¯å¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼Œä¸€ä¸ªå¾ˆå¹³å‡¡çš„ Access deniedã€‚")])]),s._v(" "),a("div",{staticClass:"language-log line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-log"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("(")]),s._v("HY000"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1698")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Access denied for user "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("@")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'localhost'")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("ç„¶åæˆ‘å°±å»åˆ›å»ºæ–°çš„ç”¨æˆ·äº†ï¼Œå…·ä½“æµç¨‹è€ç”Ÿå¸¸è°ˆäº†")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("USER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'rootp'")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@'localhost'")]),s._v(" IDENTIFIED "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'...'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- ä¸æ˜¯ root å°±å¯ä»¥ï¼Œå˜»å˜»")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("GRANT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALL")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIVILEGES")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TO")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'rootp'")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@'localhost'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nFLUSH "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIVILEGES")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("ç„¶åå°±ç¦»å¼€äº†æ•°æ®åº“ã€‚å°±åœ¨è¿™ä¸ªæ—¶å€™æˆ‘çªç„¶ä¸çŸ¥é“æ€ä¹ˆæƒ³çš„æƒ³è¦é‡å¯ä¸€ä¸‹æ•°æ®åº“ï¼Œè™½ç„¶è¿™ç§æƒ…å†µä¸‹ä¸é‡å¯æ˜¯å®Œå…¨å¯ä»¥çš„ã€‚é‡å¯å°±é‡å¯å§ï¼Œåæ­£ä¸æ˜¯ç”šä¹ˆé«˜å±æ“ä½œï¼Œå¯è¿™ä¸€é‡å¯å¯ç»™çˆ·æ•´éº»äº†å•Šï¼Œå‡ºç°äº†æˆ‘ä»æ¥æ²¡æœ‰è§è¿‡çš„é”™è¯¯ï¼Œç”šè‡³è§‰å¾— MariaDB åœ¨é€—æˆ‘ã€‚æŠ¥é”™ä¿¡æ¯å¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼š")]),s._v(" "),a("div",{staticClass:"language-log line-numbers-mode"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[s._v("Â ")]),a("div",{staticClass:"highlighted"},[s._v("Â ")]),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[s._v("Â ")]),a("br")]),a("pre",{pre:!0,attrs:{class:"language-log"}},[a("code",[a("span",{pre:!0,attrs:{class:"token date number"}},[s._v("Aug 06")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token time number"}},[s._v("01:35:42")]),s._v(" server systemd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Starting MariaDB "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.1.47")]),s._v(" database server"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" Subject"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Unit "),a("span",{pre:!0,attrs:{class:"token domain constant"}},[s._v("mariadb.service")]),s._v(" has begun start"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("up\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" Defined"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("By"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" systemd\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" Support"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token url"}},[s._v("http://www.ubuntu.com/support")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" Unit "),a("span",{pre:!0,attrs:{class:"token domain constant"}},[s._v("mariadb.service")]),s._v(" has begun starting up"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token date number"}},[s._v("Aug 06")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token time number"}},[s._v("01:35:43")]),s._v(" server mysqld"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4431")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token date number"}},[s._v("2021-08-06")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token time number"}},[s._v("1:35:43")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("140103940127872")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Note"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token file-path string"}},[s._v("/usr/sbin/mysqld")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("(")]),s._v("mysqld "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.1.47")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("MariaDB"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("0ubuntu0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("18"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("04"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("1"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(")")]),s._v(" starting as process "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4431")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token date number"}},[s._v("Aug 06")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token time number"}},[s._v("01:35:46")]),s._v(" server systemd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" mariadb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("service"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Main process exited"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" code"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("exited"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" status"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("NOTRUNNING\n"),a("span",{pre:!0,attrs:{class:"token date number"}},[s._v("Aug 06")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token time number"}},[s._v("01:35:46")]),s._v(" server systemd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" mariadb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("service"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Failed with result "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'exit-code'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token date number"}},[s._v("Aug 06")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token time number"}},[s._v("01:35:46")]),s._v(" server systemd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Failed to start MariaDB "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.1.47")]),s._v(" database server"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" Subject"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Unit "),a("span",{pre:!0,attrs:{class:"token domain constant"}},[s._v("mariadb.service")]),s._v(" has failed\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" Defined"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("By"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" systemd\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" Support"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token url"}},[s._v("http://www.ubuntu.com/support")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" Unit "),a("span",{pre:!0,attrs:{class:"token domain constant"}},[s._v("mariadb.service")]),s._v(" has failed"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" The result is RESULT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n")])]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),a("p",[s._v("çœ‹çœ‹é«˜äº®çš„è¡Œï¼Œè¯´çš„æ˜¯ SQL è¯å—ï¼Ÿå•¥å«ä½œ "),a("code",[s._v("Failed with result 'exit-code'")]),s._v("ã€"),a("code",[s._v("The result is RESULT")]),s._v("ï¼Ÿç¬‘æ­»ï¼Œå¬å›ä¸€å¸­è¯ï¼Œå¦‚å¬ä¸€å¸­è¯ï¼æ— è®ºæ€ä¹ˆå»æŸ¥ï¼Œå¾—åˆ°çš„ç»“æœéƒ½ä¸æ˜¯å®Œå…¨ç¬¦åˆï¼Œä½†æ˜¯å®ƒä»¬éƒ½æœ‰ä¸€ä¸ªå…±æ€§å°±æ˜¯â€”â€”ä½ è¦é‡è£…ä½ çš„ MySQLã€‚ç¡®å®ï¼Œé‡è£…æ˜¯ä¸€ä¸ªå®Œç¾çš„åŠæ³•ï¼Œæˆ‘ä¹Ÿå¾ˆå–œæ¬¢ï¼Œå¹²è„†åˆ©è½ä¸ç”¨è´¹äº‹è´¹åŠ›æƒ³åŠæ³•ï¼Œå¯æ˜¯â€”â€”æˆ‘çš„æ•°æ®ï¼MySQL æ­»äº†ï¼Œæ‰€ä»¥ "),a("code",[s._v("mysqldump")]),s._v(" ä¹Ÿç”¨ä¸äº†...è¿™æ˜¯ä¸ªæ‚–è®ºï¼Œæˆ‘çš„æ•°æ®å¯èƒ½å–ä¸å›æ¥äº†ï¼Œé‚£çœŸæ˜¯å¤Ÿææ€–ã€‚ä½†æ˜¯æˆ‘å¿½ç„¶åˆæƒ³åˆ°ï¼ŒMySQL ä¸€å®šæ˜¯é€šè¿‡æ–‡ä»¶æ¥å­˜å‚¨æ•°æ®çš„ï¼Œäºæ˜¯æˆ‘æœåˆ°äº†ä¸‹é¢è¿™æ®µè¯ã€‚")]),s._v(" "),a("blockquote",[a("p",[s._v("What you should do is image your drive, copy it to something else, in preparation for your reinstall. I'd recommend copying everything as authentically as you can, even if that takes a while. That feeling you get when you realize you forgot to salvage something important that is now gone forever is not good.")]),s._v(" "),a("p",[s._v("MySQL generally stores data in the data directory. It may take some work to get your MySQL back into the same configuration as before, so be sure to grab the appropriate my.cnf file.")]),s._v(" "),a("p",[s._v("It can be really difficult to extract data from a bunch of MySQL data files without the MySQL process actually running. This is why tools like mysqldump exist. If you can get it running, even limping along, that'll be good enough to snapshot it.\n"),a("br"),a("br"),s._v(" "),a("em",[s._v("æ¥è‡ª "),a("a",{attrs:{href:"https://stackoverflow.com/questions/20130706/backup-dead-mysql-server",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://stackoverflow.com/questions/20130706/backup-dead-mysql-server"),a("OutboundLink")],1)])])]),s._v(" "),a("p",[s._v("è¿™æ®µè¯å‘Šè¯‰æˆ‘ï¼Œå°†æ¥çš„è·¯ä¼šå¾ˆåå·...å•Šè¿™ï¼Œæˆ‘åªæ˜¯æƒ³è¦é‡å¯ä¸ª MySQLï¼Œç”¨å¾—ç€è¿™æ ·å¯¹æˆ‘å—ã€‚æŸæ‰‹æ— ç­–çš„æ—¶å€™ï¼Œæˆ‘çªç„¶æƒ³åˆ°ï¼Œæ—¢ç„¶è¦é‡è£…ï¼Œè¦ä¸æŠŠæ•°æ®éƒ½æ¢ä¸ªä½ç½®è¯•è¯•ï¼Ÿä¹Ÿå°±æ˜¯è¯´æŠŠæ•´ä¸ª MySQL ç”¨æ¥å­˜æ”¾æ•°æ®çš„æ–‡ä»¶å¤¹æ¢åˆ°å¦å¤–ä¸€ä¸ªåœ°æ–¹ï¼Œå—¯ï¼Œæ¢ä¸ªæ–°çš„ç¯å¢ƒï¼Œæ²¡å‡†å°±å¯ä»¥äº†ã€‚å°±æ˜¯è¿™ä¸ªå¥‡å¦™çš„è„‘å›è·¯æ‹¯æ•‘äº†æˆ‘ã€‚")]),s._v(" "),a("p",[s._v("é¦–å…ˆï¼Œé‡åˆ°äº†ä¸€ä¸ªå¾ˆå‘çš„åœ°æ–¹ï¼Œé‚£å°±æ˜¯ä¸ç¡®å®šæ•°æ®åœ¨å“ªé‡Œã€‚ç½‘ä¸Šè¯´çš„é»˜è®¤åœ¨ "),a("code",[s._v("/var/lib/mysql")]),s._v("ï¼Œè™½ç„¶æˆ‘ä¹Ÿå‘ç°é‚£é‡Œæœ‰å¾ˆå¤šæ–‡ä»¶ï¼Œä¹Ÿæ˜¯ä¸æ•¢ç¡®å®šã€‚ç„¶ååˆæœ‰çš„è¯´å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ "),a("code",[s._v("/etc/mysql/mysql.conf.d/mysqld.cnf")]),s._v(" é‡Œé¢çœ‹ï¼Œç»“æœå¹¶æ²¡æœ‰è¿™ä¸ªæ–‡ä»¶ï¼Œä¹Ÿè®¸æ˜¯å› ä¸ºæˆ‘æ˜¯ MariaDBï¼Œæ‰€ä»¥åº”è¯¥åœ¨ "),a("code",[s._v("/etc/mysql/my.cnf")]),s._v(" é‡Œé¢ã€‚ç¡®å®æœ‰è¿™ä¸ªæ–‡ä»¶ï¼Œä½†æ˜¯é‡Œé¢å¹¶æ²¡æœ‰ "),a("code",[s._v("datadir")]),s._v(" è¿™ä¸ªå‚æ•°ï¼ŒçœŸæ˜¯é†‰äº†ã€‚åˆ°åæ¥æˆ‘é¼“èµ·å‹‡æ°”æŠŠ "),a("code",[s._v("datadir")]),s._v(" è®¾ç½®æˆäº† "),a("code",[s._v("/mysql-db")]),s._v("ï¼Œå¼€å§‹äº†è¿ç§»ä¹‹è·¯ã€‚")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /mysql-db\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rsync")]),s._v(" -av /var/lib/mysql/ /mysql-db\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("755")]),s._v(" /mysql-db\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("ç›˜ç‚¹ä¸€ä¸‹è¿™é‡Œçš„å‘ï¼Œé¦–å…ˆ "),a("code",[s._v("rsync")]),s._v(" çš„ç¬¬äºŒä¸ªå‚æ•° "),a("code",[s._v("/var/lib/mysql/")]),s._v(" çš„æœ€åå¸¦ä¸å¸¦ "),a("code",[s._v("/")]),s._v(" æ˜¯æœ‰åŒºåˆ«çš„ã€‚å¸¦ä¸Šäº†å°±ä»£è¡¨ "),a("code",[s._v("/var/lib/mysql/*")]),s._v("ï¼Œä¸å¸¦ä¸Šå°±ä»£è¡¨è¿™ä¸ªç›®å½•æœ¬èº«ã€‚åˆšå¼€å§‹æ²¡æœ‰å¸¦ï¼Œå¤åˆ¶äº†ä»¥åä¹Ÿæ²¡æœ‰å» "),a("code",[s._v("ls /mysql-db")]),s._v(" å¯¼è‡´å¯åŠ¨çš„æ—¶å€™åˆ·äº†ä¸€å¤§å † not found æŠ¥é”™...ç„¶åå°±æ˜¯æƒé™é—®é¢˜ï¼Œåº”è¯¥æ˜¯ "),a("code",[s._v("755")]),s._v("ã€‚")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",[s._v("ä¸ºå•¥ä¸ç”¨ "),a("code",[s._v("mv *")]),s._v("ï¼Ÿå› ä¸ºå½“æ—¶æƒ³ä¸åˆ° "),a("code",[s._v("mv")]),s._v("ï¼Œåˆ«éª‚äº†")])]),s._v(" "),a("p",[s._v("ç„¶åè¿˜æœ‰ä¸€ä¸ªç‚¹å°±æ˜¯è¦å» apparmor é‡Œé¢åˆ›å»ºä¸€ä¸ªåˆ«åã€‚")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/apparmor.d/tunables/alias\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("æ·»åŠ  "),a("code",[s._v("alias /var/lib/mysql -> /mysql-db")]),s._v("ï¼Œç„¶å "),a("code",[s._v("systemctl restart apparmor")]),s._v("ã€‚æ¥ä¸‹æ¥å°±å¯ä»¥å‡†å¤‡å¯åŠ¨ MySQL äº†ã€‚")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("systemctl start mysql\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("è®©æˆ‘éœ‡æƒŠçš„æ˜¯è¿™æ¬¡å¯åŠ¨æ²¡æœ‰æŠ¥é”™äº†ã€‚åŸç†è¿˜å¾…è§£é‡Šï¼Œä¸è¿‡æˆ‘ä¸€ç§’å°±å»å…¨é‡å¤‡ä»½äº†ä¸€ä¸‹ï¼Œå› ä¸ºæœ‰äº†å¤‡ä»½å°±å¯ä»¥ç›´æ¥é‡è£…å°±æ²¡æœ‰è¿™ä¹ˆå¤šç ´äº‹äº†ğŸ˜…")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("mysqldump -u root --all-databases "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /alldb.sql\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("ç„¶åè¿˜å¯ä»¥åœ¨ cron é‡Œé¢åŠ ä¸€ä¸ªå®šæ—¶çš„å¤‡ä»½ï¼Œä¸ºäº†é¿å…è¾“å…¥å¯†ç ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ª "),a("code",[s._v("~/my.cnf")]),s._v(" ç„¶åå†™å…¥å†…å®¹")]),s._v(" "),a("div",{staticClass:"language-conf line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("[mysqldump]\nuser=root\npassword=...\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("ç„¶ååœ¨ "),a("code",[s._v("crontab -e")]),s._v(" é‡Œé¢åŠ å…¥")]),s._v(" "),a("div",{staticClass:"language-crontab line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("10 * * * * mysqldump -u root --all-databases > /alldb.sql\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("å°±å¯ä»¥äº†ã€‚")])])}),[],!1,null,null,null);t.default=r.exports}}]);